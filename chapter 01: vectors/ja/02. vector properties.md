# ベクトルの性質 (Vector Properties)

- ベクトルの **大きさ (magnitude)** (または長さ) は、そのベクトルが _どれくらい遠く_ まで達するかを示します。矢印の長さだと考えてください。ベクトル $\mathbf{a} = (a_1, a_2, a_3)$ に対して、その大きさは以下の通りです：

$$\|\mathbf{a}\| = \sqrt{a_1^2 + a_2^2 + a_3^2}$$

- これは、ピタゴラスの定理を高次元に拡張したもので、原点からその点までの直線距離を測定しているに過ぎません。

- ベクトルの **方向 (direction)** は、それが _どこを_ 指しているかを示します。単純に原点からその座標の点までの直線をイメージしてください。

- 原点が明示的に指定されていない場合、少なくとも視覚化の目的では、中心点である (0,0,...0) を暗黙的に指すことがよくあります。

- 位置は重要ではなく、常に「変位」が問題となります。原点から描かれたベクトル $(3, 2)$ と、別の点から描かれた同じ $(3, 2)$ は等しいとみなされます。

![ベクトルの相等：2つの異なる始点から描かれた同じ (3,2) ベクトル](../images/vector_equality.svg)

- 2つのベクトルは、長さが同じでも方向が全く異なる場合や、方向が同じでも長さが異なる場合があります。

![同じ方向で異なる大きさ (v と 2v) vs 同じ大きさで異なる方向](../images/magnitude_direction.svg)

- 2つのベクトルが **等しい (equal)** とは、対応するすべての成分が一致している場合に限ります。つまり、同じ長さ、同じ方向を持つ、全く同じ矢印のことです。

$$\mathbf{a} = \mathbf{b} \iff \text{すべての } i \text{ に対して } a_i = b_i$$

- 2つのベクトルが **平行 (parallel)** であるとは、一方がもう一方のスカラー倍である場合を指します。それらは同じ直線上にあり、同じ方向を向いているか、あるいは正反対を向いています。

$$\mathbf{a} \parallel \mathbf{b} \iff \text{あるスカラー } k \neq 0 \text{ に対して } \mathbf{a} = k\mathbf{b}$$

![平行なベクトル：a と b は同じ方向を向き、a と -b は反対方向を向いている](../images/parallel_vectors.svg)

- $k > 0$ であれば同じ方向を、$k < 0$ であれば反対方向を指します。いずれにせよ、それらは原点を通る同じ直線上に位置します。

- 直感的には、平行なベクトルは「新しい」方向の情報を持っていません。一方はもう一方を伸ばしたり反転させたりしたものに過ぎないからです。

- 2つのベクトルが **直交 (orthogonal)** (垂直) であるとは、それらが完全に独立した方向を指している場合を指します。一方に沿って移動しても、もう一方に沿った進捗はゼロになります。

![直交するベクトル：u と v が直角に交わっている](../images/orthogonal_vectors.svg)

- 北に歩いてから東に歩くことを想像してください。これらは直交する方向であり、いくら北に歩いても東に移動することはありません。MLでは「直交性」という概念に非常に頻繁に遭遇します。

- 直交性はMLにおいて中心的な役割を果たします。直交する特徴量は完全に独立した情報を持っており、これは表現の観点から理想的です。

- より一般的には、任意の2つのベクトル間には、$0°$ から $180°$ の範囲の **角度 (angle)** $\theta$ が存在します。

- この角度は2つの方向間の関係をすべて捉えています。$0°$ は平行（同じ方向）、$180°$ は平行（反対方向）、そして $90°$ は直交を意味します。その中間の値はそれらの混合状態です。

- MLにおけるほとんどのベクトル間の関係は、このスペクトルのどこかに位置します。後ほど、この角度を計算するための正確なツール（ドット積、コサイン類似度）について見ていきます。

- ベクトルの集合が **線形従属 (linearly dependent)** であるとは、そのうちの少なくとも1つが、他のベクトルをスカラー倍して足し合わせる（線形結合）ことで作れる場合を指します。そのベクトルは集合に新しい情報をもたらしません。

- 例えば、もし $\mathbf{c} = 2\mathbf{a} + 3\mathbf{b}$ であれば、$\mathbf{c}$ は冗長です。$\mathbf{a}$ と $\mathbf{b}$ を通じて、$\mathbf{c}$ が提供する情報のすべてを既に持っているからです。

- 平行なベクトルは、一方がもう一方のスカラー倍であるため、常に線形従属です。また、零ベクトルを含む集合も常に線形従属となります。

- ベクトルが **線形独立 (linearly independent)** であるとは、それらのどれも他のベクトルから作ることができない場合を指します。各ベクトルが純粋に新しい方向を寄与しています。直交するベクトルは常に線形独立です。

- 2次元では、2つの線形独立なベクトルがあれば平面上のあらゆる点に到達できます。3次元では3つ必要です。この「何本の独立したベクトルが必要か」という考え方は、次元の概念と直接結びついています。

- ベクトルの成分のほとんどがゼロであるとき、そのベクトルを **疎 (sparse)** であると言います。逆の、ほとんどの成分がゼロでない状態は **密 (dense)** と呼ばれます。

$$\mathbf{s} = [0, 0, 3, 0, 0, 0, 1, 0, 0, 0]$$

- 疎（スパース）性は、ストレージ（保存容量）と計算の両方に影響するため重要です。疎なベクトルは、ゼロでない成分のみを追跡することで、はるかに効率的に保存および処理できます。

- **単位ベクトル (unit vector)** は、大きさがちょうど 1 のベクトルです。これは純粋に「方向」のみを表し、長さの情報を含みません。任意のベクトルをその大きさで割ることで、単位ベクトルに変えることができます：

$$\hat{\mathbf{a}} = \frac{\mathbf{a}}{\|\mathbf{a}\|}$$

- このプロセスは **正規化 (normalization)** と呼ばれます。「どれくらい遠くか」を削ぎ落とし、「どちらの方向か」だけを残します。

- 標準的な単位ベクトルは各軸に沿ったものを指します： $\hat{\mathbf{i}} = (1, 0, 0)$, $\hat{\mathbf{j}} = (0, 1, 0)$, $\hat{\mathbf{k}} = (0, 0, 1)$。あらゆるベクトルはこれらを組み合わせて書くことができます。例えば、$(3, 2, 4) = 3\hat{\mathbf{i}} + 2\hat{\mathbf{j}} + 4\hat{\mathbf{k}}$ となります。

## コーディング課題 (CoLab または notebook を使用)

1. ベクトルの大きさを計算し、ピタゴラスの定理と一致することを検証してください。また、コードを修正して単位ベクトルを計算してみてください。

```python
import jax.numpy as jnp

a = jnp.array([3.0, 4.0])

magnitude = jnp.sqrt(jnp.sum(a ** 2))
print(f"Magnitude of a: {magnitude}")
```

2. 2つのベクトルを比較して、一方がもう一方のスカラー倍であるかどうかをテストし、平行であるかチェックしてください。

```python
import jax.numpy as jnp

a = jnp.array([2, 4, 6])
b = jnp.array([1, 2, 3])

ratios = a / b
print(f"Ratios: {ratios}")
print(f"Parallel: {jnp.allclose(ratios, ratios[0])}")
```
